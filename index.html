<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <title>Wouven</title>
</head>
<body class="h-screen w-screen">

    <section class="w-full">
        <div class="flex flex-col items-center">
            <p class="text-4xl font-bold">Wouven</p>
        </div>

        <div id="head">

        </div>
    </section>

    <section class="flex items-center justify-between my-2 h-4/5 w-full">
        <div class="flex flex-col h-full w-1/4 mx-2">
            <div id="myStatus" class="flex h-1/5 w-full">
                <div id="myStatusSprite" class="h-20 w-20 bg-center bg-cover bg-no-repeat" style="background-image: url(img/cell.png);"></div>
                <div id="myStatusFeature" class="mx-2">
                    <div id="myStatusPv">PV : 0 / 0</div>
                    <div id="myStatusAtk">ATK : 0 / 0</div>
                    <div id="myStatusPm">PM : 0 / 0</div>
                    <div id="myStatusGauges">Gauges : 0 / 0 / 0 / 0 / 0</div>
                </div>
            </div>
            <div id="myCompanions" class="flex flex-col h-2/3 mx-4 w-full"></div>
        </div>

        <div class="flex h-full w-1/2 mx-2">
            <div id="board" class="flex-grow grid grid-cols-7 grid-rows-7 w-max"></div>
        </div>

        <div class="flex flex-col h-full w-1/4 mx-2">
            <div id="opStatus" class="flex h-1/5 w-full">
                <div id="opStatusSprite" class="h-20 w-20 bg-center bg-cover bg-no-repeat" style="background-image: url(img/cell.png)"></div>
                <div id="opStatusFeature" class="mx-2">
                    <div id="opStatusPv">PV : 0 / 0</div>
                    <div id="opStatusAtk">ATK : 0 / 0</div>
                    <div id="opStatusPm">PM : 0 / 0</div>
                    <div id="opStatusGauges">Gauges : 0 / 0 / 0 / 0 / 0</div>
                </div>
            </div>
        </div>
    </section>

    <section class="flex items-center justify-between my-2 w-full">
        <div class="h-full w-1/4 mx-2">
            <div id="errorLog" class="rounded-lg bg-black text-white font-semibold h-full p-2"></div>
        </div>

        <div class="h-full w-1/2 mx-2">
            <div id="handBar" class="flex flex-row">
                <div id="pa" class="h-20 w-20 bg-center bg-cover bg-no-repeat mx-2 center-white" style="background-image: url(img/pa.png);"></div>
                <div id="paStock" class="h-20 w-20 bg-center bg-cover bg-no-repeat mx-2 center-white" style="background-image: url(img/utils/pareserve.png);"></div>
                <div id="hand" class="flex-grow grid grid-cols-7 grid-rows-1 w-max mx-2"></div>
            </div>
        </div>

        <div class="h-full w-1/4 mx-2">
            <button id="stateBtn" type="button" class="state-btn" onclick="stateBtnClick()">Opponent turn</button>
            <button id="cancelBtn" type="button" class="cancel-btn" onclick="cancelBtnClick()">Cancel</button>
        </div>
    </section>

    <script>
        const BOARD_ROWS = 7;
        const BOARD_COLS = 7;
        const HAND_SPELLS = 7;
        const COMPANIONS = 4;

        $("#stateBtn").css("background-color", "#FF0000");
        $("#stateBtn").text("Opponent turn");

        for (i = 0; i < COMPANIONS; i++)
        {
            document.getElementById("myCompanions").insertAdjacentHTML('beforeend', `<div id="myCompanion_${i}" class="flex h-1/4 w-full"></div>`);
            document.getElementById("myCompanion_" + i).insertAdjacentHTML('beforeend', `<div id="myCompanion_${i}_sprite" class="h-20 w-20 bg-center bg-cover bg-no-repeat" style="background-image: url(img/cell.png);"></div>`);
            document.getElementById("myCompanion_" + i).insertAdjacentHTML('beforeend', `<div id="myCompanion_${i}_feature" class="mx-2"></div>`);
            document.getElementById("myCompanion_" + i + "_feature").insertAdjacentHTML('beforeend', `<div id="myCompanion_${i}_pv">PV : 0</div>`);
            document.getElementById("myCompanion_" + i + "_feature").insertAdjacentHTML('beforeend', `<div id="myCompanion_${i}_atk">ATK : 0</div>`);
            document.getElementById("myCompanion_" + i + "_feature").insertAdjacentHTML('beforeend', `<div id="myCompanion_${i}_pm">PM : 0</div>`);
        }
        for (y = 0; y < BOARD_ROWS; y++)
        {
            for (x = 0; x < BOARD_COLS; x++)
            {
                document.getElementById("board").insertAdjacentHTML('beforeend',`<div id="board_${x}_${y}" class="border-2 border-light-blue-500 border-opacity-25 relative bg-center bg-cover bg-no-repeat"></div>`);
                $("#board_" + x + "_" + y).click(function() {boardTileClick($(this))});
            } 
        }
        for (i = 0; i < HAND_SPELLS; i++)
        {
            document.getElementById("hand").insertAdjacentHTML('beforeend',`<div id="spell_${i}" class="border-2 border-light-blue-500 border-opacity-25 relative bg-center bg-cover bg-no-repeat"></div>`);
            $("#spell_" + i).click(function() {spellClick($(this))});
        }

    </script>

    <script src="js/clientInteraction.js"></script>
    <script src="js/serverCom.js"></script>
    <script src="js/Tooltip.js"></script>


    <script>
        new Tooltip(document.getElementById("myStatus"), "Reluire la plote");
    </script>

</body>
</html>